{% extends 'base.html' %}
{% block title %}Globspot | Actulizar Compañía{% endblock %}


  {% block content %} 
  <div class="container">
    <form method="post" action="{% url 'update_companies' object.pk %}" accept-charset="utf-8">
      {% csrf_token %}
        <div class="col-12">
            <fieldset>
                <legend>Cliente</legend>
                
                <div class="form-group col-12">
                  <label for="{{form.name.id_for_label}}">{{form.name.label}}: </label>
                  {{form.name}}
                </div>
                <div class="form-group col-12">
                  <label for="{{form.description.id_for_label}}">{{form.description.label}}: </label>
                  {{form.description}}
                </div>
              </fieldset>
        </div>
        <div class="modal-footer">
            <input type="submit" value="Guardar" class="btn btn-success">
            <a href="{% url 'companies' %}" class="btn btn-danger" >Cancelar</a>

        </div>
    </form>

</div>

{% endblock %}

{% block js %}
 
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script type="text/javascript">

  $('#id_company').select2({ width: '100%' });

  $("#update_budget_form").on('submit', function(e){
    e.preventDefault();
    data = $('form').serialize()
    $.ajax({
      type:"POST",
      url: "{% url 'add_budget' %}",
      data:data,
      success: function (xhr, ajaxOptions, thrownError) {
        if (xhr.pk){
            Swal.fire(
          'Actualizado',
          'En un momento aparecerá tu PDF',
          'success'
          ) 
          
          $("p").append(" <b>Appended text</b>.");
          $("p").append(" <b>Appended text</b>.");
        }
      },      
      error: function (xhr, ajaxOptions, thrownError) {
        
      }
      
    })
      
    })
    


</script>
{% endblock %}